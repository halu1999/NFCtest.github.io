<html><head><style> *{font-family:Arial;} body {font-size:18px; background-color:#fff; border-collapse:collapse; border:none; margin:0; padding:0; border:0; border-spacing:0px; -webkit-touch-callout:none; -webkit-user-select:none; -khtml-user-select:none; -moz-user-select:none; -ms-user-select:none; user-select:none;}</style></head><body><div id='tuesday' style='width:100%; height:100vh;'> </div><script type='text/javascript'>let story_json=new Array;var tue_text_view,tue_text_block,tue_text_element,languare,dialog_text,dialog_timeout,tue_story,tue_bg_music,tuesday=document.getElementById("tuesday"),tue_name_block=document.createElement("div"),scene=0,dialog=0,dialog_speed=50,dialog_letter=0,tue_fullScreen=!1;function cmenu(){return!1}function get_lang(){var e;languare=null!=navigator.languages?navigator.languages[0].substring(0,2):navigator.languagesubstring(0,2);for(var t=0;t<story_json.parameters.languares.length;t++)languare==story_json.parameters.languares[t]&&(e=!0);e||(languare=story_json.parameters.languares[0])}function load_story(e,t){if("data"==e)story_json=t,base_creation(),tuesday.dispatchEvent(new Event("script_loaded")),creation_sound();else if("file"==e){var s=new XMLHttpRequest;s.onreadystatechange=function(){if(4==this.readyState&&(200==this.status||0==this.status)){try{story_json=JSON.parse(this.responseText)}catch(e){this.status>0&&alert("Json structure error")}base_creation(),tuesday.dispatchEvent(new Event("script_loaded")),creation_sound()}},s.open("GET",t,!0),s.send(),s.onerror=function(){0==this.status&&alert("Error load json file Cross-Origin Resource Sharing(CORS)")}}}function base_creation(){if(get_lang(),story_json.parameters.style_file&&add_style(story_json.parameters.style_file),dialog_speed=story_json.parameters.text_panel.dialog_speed,story_json.parameters.title&&(story_json.parameters.title[languare]?document.title=story_json.parameters.title[languare]:document.title=story_json.parameters.title),tuesday.style.backgroundRepeat="no-repeat",tuesday.style.backgroundSize="cover",tuesday.style.backgroundPosition="center",tuesday.style.position="relative",tuesday.style.overflow="hidden",tuesday.innerHTML="<table id='tue_text_block' align='center'><tbody><tr><td id='tue_text_element'><div id='tue_text_view'></div></td></tr></tbody></table>",tue_text_block=document.getElementById("tue_text_block"),(tue_text_element=document.getElementById("tue_text_element")).style.position="relative",story_json.parameters.text_panel.className&&(tue_text_block.className=story_json.parameters.text_panel.className),story_json.parameters.text_panel.style&&(tue_text_block.style=story_json.parameters.text_panel.style),tue_text_block.style.position="absolute",story_json.parameters.text_panel.size&&(tue_text_block.style.width=story_json.parameters.text_panel.size[0],tue_text_block.style.height=story_json.parameters.text_panel.size[1]),story_json.parameters.text_panel.position?(tue_text_block.style.left=0!=story_json.parameters.text_panel.position[0]?story_json.parameters.text_panel.position[0]:"0",tue_text_block.style.right=0!=story_json.parameters.text_panel.position[1]?story_json.parameters.text_panel.position[1]:"0",0!=story_json.parameters.text_panel.position[2]&&(tue_text_block.style.top=story_json.parameters.text_panel.position[2]),0!=story_json.parameters.text_panel.position[3]&&(tue_text_block.style.bottom=story_json.parameters.text_panel.position[3])):(tue_text_block.style.left="0",tue_text_block.style.right="0"),story_json.parameters.text_panel.indent_bottom&&(tue_text_block.style.bottom=story_json.parameters.text_panel.indent_bottom),tue_text_block.style.zIndex="1000",tue_text_block.style.borderSpacing="0",(tue_text_view=document.getElementById("tue_text_view")).style.padding=story_json.parameters.text_panel.indent_text,tue_text_view.style.fontSize=story_json.parameters.text_panel.size_text,tue_text_view.style.height="100%",story_json.parameters.name_panel&&(story_json.parameters.name_panel.className&&(tue_name_block.className=story_json.parameters.name_panel.className),story_json.parameters.name_panel.style&&(tue_name_block.style=story_json.parameters.name_panel.style),story_json.parameters.name_panel.color&&(tue_name_block.style.backgroundColor=story_json.parameters.name_panel.color),story_json.parameters.name_panel.color_text?tue_name_block.style.color=story_json.parameters.name_panel.color_text:tue_name_block.style.color=story_json.parameters.text_panel.color_text,tue_name_block.style.position="absolute",tue_name_block.id="tue_name_block",tue_name_block.style.padding=story_json.parameters.name_panel.indent_text,tue_name_block.style.fontSize=story_json.parameters.name_panel.size_text,tue_name_block.style.textAlign="center",(tue_name_block.style.width=0!=story_json.parameters.name_panel.size[0])&&(tue_name_block.style.width=story_json.parameters.name_panel.size[0]),tue_name_block.style.height=story_json.parameters.name_panel.size[1],tue_name_block.style.lineHeight=story_json.parameters.name_panel.size[1],0!=story_json.parameters.name_panel.position[0]&&(tue_name_block.style.left=story_json.parameters.name_panel.position[0]),0!=story_json.parameters.name_panel.position[1]&&(tue_name_block.style.right=story_json.parameters.name_panel.position[1]),0!=story_json.parameters.name_panel.position[2]&&(tue_name_block.style.top=story_json.parameters.name_panel.position[2]),0!=story_json.parameters.name_panel.position[3]&&(tue_name_block.style.bottom=story_json.parameters.name_panel.position[3]),tue_name_block.style.zIndex=1001,tue_text_element.appendChild(tue_name_block)),(tue_bg_music=document.createElement("AUDIO")).id="tue_bg_music",tuesday.appendChild(tue_bg_music),story_json.parameters.launch_story)tue_story=story_json.parameters.launch_story;else for(var e=0;e<2;e++)if("parameters"!=Object.getOwnPropertyNames(story_json)[e]){story_json.parameters.launch_story=Object.getOwnPropertyNames(story_json)[1],tue_story=story_json.parameters.launch_story;break}tuesday.dispatchEvent(new Event("script_executed")),localStorage.getItem(story_json.parameters.autosave)&&(story_json.parameters.variables=JSON.parse(localStorage.getItem("tue_auto_data"))),creation_buttons(),creation_scene()}function creation_buttons(){for(i=0;i<story_json.parameters.buttons.length;i++){var e=document.createElement("div");story_json.parameters.buttons[i].sound&&e.setAttribute("onclick",story_json.parameters.buttons[i].sound?get_sound(story_json.parameters.buttons[i].sound):""+story_json.parameters.buttons[i].sound_stop?get_stop_sound(story_json.parameters.buttons[i].sound_stop):""),story_json.parameters.buttons[i].className&&(e.className=story_json.parameters.buttons[i].className),story_json.parameters.buttons[i].style&&(e.style=story_json.parameters.buttons[i].style),story_json.parameters.buttons[i].text&&("object"!=typeof story_json.parameters.buttons[i].text||story_json.parameters.buttons[i].text[languare]&&"object"!=typeof story_json.parameters.buttons[i].text[languare])&&(e.innerHTML=story_json.parameters.buttons[i].text[languare]?story_json.parameters.buttons[i].text[languare]:story_json.parameters.buttons[i].text,e.style.padding=story_json.parameters.buttons[i].indent_text,e.style.textAlign="center",e.style.color=story_json.parameters.buttons[i].color_text,e.style.fontSize=story_json.parameters.buttons[i].size_text),e.style.zIndex=2e3+i,e.id=story_json.parameters.buttons[i].name,e.classList.add("tue_controll"),e.style.position="absolute",e.style.width=story_json.parameters.buttons[i].size[0],e.style.height=story_json.parameters.buttons[i].size[1],e.style.backgroundColor=story_json.parameters.buttons[i].color,e.style.backgroundRepeat="no-repeat",e.style.backgroundPosition="center",story_json.parameters.buttons[i].art&&(e.style.backgroundImage="url('"+(story_json.parameters.buttons[i].art[languare]?story_json.parameters.buttons[i].art[languare]:story_json.parameters.buttons[i].art)+"')"),story_json.parameters.buttons[i].art_size&&(e.style.backgroundSize=story_json.parameters.buttons[i].art_size[0]+" "+story_json.parameters.buttons[i].art_size[1]),0!=story_json.parameters.buttons[i].position[0]&&(e.style.left=story_json.parameters.buttons[i].position[0]),0!=story_json.parameters.buttons[i].position[1]&&(e.style.right=story_json.parameters.buttons[i].position[1]),0!=story_json.parameters.buttons[i].position[2]&&(e.style.top=story_json.parameters.buttons[i].position[2]),0!=story_json.parameters.buttons[i].position[3]&&(e.style.bottom=story_json.parameters.buttons[i].position[3]),tuesday.appendChild(e)}if(document.getElementById("tue_next")&&document.getElementById("tue_next").addEventListener("click",function(){go_story()}),document.getElementById("tue_back")&&document.getElementById("tue_back").addEventListener("click",function(){back_story()}),document.getElementById("tue_home")){var t=story_json.parameters.launch_story;document.getElementById("tue_home").addEventListener("click",function(){go_to(t)})}document.getElementById("tue_save")&&document.getElementById("tue_save").addEventListener("click",function(){save_stag("bookmark")}),document.getElementById("tue_load")&&document.getElementById("tue_load").addEventListener("click",function(){load_stag("bookmark")}),document.getElementById("tue_fullScreen")&&document.getElementById("tue_fullScreen").addEventListener("click",function(){full_screen()})}function creation_scene(){if(del_element("tue_html_scene"),story_json[tue_story][scene].legacy_choice)for(var e=0;e<story_json[tue_story][scene].legacy_choice.length;e++){var t=story_json[tue_story][scene].legacy_choice[e][0],s=story_json[tue_story][scene].legacy_choice[e][1],o=story_json[tue_story][scene].legacy_choice[e][2],a=story_json[tue_story][scene].legacy_choice[e][3];if(">"==s&&story_json.parameters.variables[t]>o){go_to(a);break}if("<"==s&&story_json.parameters.variables[t]<o){go_to(a);break}if("="==s&&story_json.parameters.variables[t]==o){go_to(a);break}if(story_json[tue_story][scene].legacy_choice[e].go_to){go_to(story_json[tue_story][scene].legacy_choice[e].go_to);break}e==story_json[tue_story][scene].legacy_choice.length-1&&(scene++,dialog=0,creation_scene())}var n;(story_json[tue_story][scene].background_class?tuesday.className=story_json[tue_story][scene].background_class:tuesday.className="",story_json[tue_story][scene].background_color&&(tuesday.style.backgroundColor=story_json[tue_story][scene].background_color),story_json[tue_story][scene].background_image&&(story_json[tue_story][scene].background_image[languare]?tuesday.style.backgroundImage="url('"+story_json[tue_story][scene].background_image[languare]+"')":tuesday.style.backgroundImage="url('"+story_json[tue_story][scene].background_image+"')"),document.getElementById("tue_home")&&(tue_story==story_json.parameters.launch_story?document.getElementById("tue_home").style.visibility="hidden":document.getElementById("tue_home").style.visibility="visible"),story_json[tue_story][scene].html)&&(story_json[tue_story][scene].html[languare]?((n=document.createElement("div")).className="tue_html_scene",n.innerHTML=story_json[tue_story][scene].html[languare],tuesday.appendChild(n)):((n=document.createElement("div")).className="tue_html_scene",n.innerHTML=story_json[tue_story][scene].html,tuesday.appendChild(n)));creation_dialog(),story_json[tue_story][scene].background_music&&search_music()}function creation_dialog(){if(scene!=story_json[tue_story].length-1||dialog!=story_json[tue_story][scene].dialogs.length-1||story_json[tue_story][scene].dialogs[dialog].go_to?document.getElementById("tue_next").style.visibility="visible":document.getElementById("tue_next").style.visibility="hidden",0!=scene||0!=dialog||story_json[tue_story][scene].dialogs[dialog].back_to?document.getElementById("tue_back").style.visibility="visible":document.getElementById("tue_back").style.visibility="hidden","hidden"==story_json[tue_story][scene].dialogs[dialog].controll)for(var e=document.getElementById("tuesday").getElementsByClassName("tue_controll"),t=0;t<e.length;t++)e[t].style.visibility="hidden";else if("visible"==story_json[tue_story][scene].dialogs[dialog].controll)for(e=document.getElementById("tuesday").getElementsByClassName("tue_controll"),t=0;t<e.length;t++)e[t].style.visibility="visible";if(story_json[tue_story][scene].dialogs[dialog].text?(tue_text_block.style.visibility="visible",tue_text_view.innerHTML="",values_in_text(!1),clearTimeout(dialog_timeout),anim_text(),story_json[tue_story][scene].dialogs[dialog].text.className&&(tue_text_block.className=story_json[tue_story][scene].dialogs[dialog].text.className),story_json[tue_story][scene].dialogs[dialog].text.style&&(tue_text_block.style=story_json[tue_story][scene].dialogs[dialog].text.style)):story_json[tue_story][scene].dialogs[dialog].text_add?(tue_text_block.style.visibility="visible",tue_text_view.innerHTML="",values_in_text(!0),clearTimeout(dialog_timeout),anim_text()):tue_text_block.style.visibility="hidden",story_json[tue_story][scene].dialogs[dialog].color?tue_text_block.style.backgroundColor=story_json[tue_story][scene].dialogs[dialog].color:story_json.parameters.text_panel.color&&(tue_text_block.style.backgroundColor=story_json.parameters.text_panel.color),story_json[tue_story][scene].dialogs[dialog].color_text?tue_text_view.style.color=story_json[tue_story][scene].dialogs[dialog].color_text:story_json.parameters.text_panel.color_text&&(tue_text_view.style.color=story_json.parameters.text_panel.color_text),story_json[tue_story][scene].dialogs[dialog].name?(story_json[tue_story][scene].dialogs[dialog].name[languare]?(tue_name_block.innerHTML=story_json[tue_story][scene].dialogs[dialog].name[languare],tue_name_block.style.backgroundColor=story_json[tue_story][scene].dialogs[dialog].name.color,tue_name_block.style.color=story_json[tue_story][scene].dialogs[dialog].name.color_text,story_json[tue_story][scene].dialogs[dialog].name.className&&(tue_name_block.className=story_json[tue_story][scene].dialogs[dialog].name.className)):story_json.parameters.characters?story_json.parameters.characters[story_json[tue_story][scene].dialogs[dialog].name]?(tue_name_block.innerHTML=story_json.parameters.characters[story_json[tue_story][scene].dialogs[dialog].name][languare],tue_name_block.style.backgroundColor=story_json.parameters.characters[story_json[tue_story][scene].dialogs[dialog].name].color,tue_name_block.style.color=story_json.parameters.characters[story_json[tue_story][scene].dialogs[dialog].name].color_text,story_json.parameters.characters[story_json[tue_story][scene].dialogs[dialog].name].className&&(tue_name_block.className=story_json.parameters.characters[story_json[tue_story][scene].dialogs[dialog].name].className)):(tue_name_block.innerHTML=story_json[tue_story][scene].dialogs[dialog].name,tue_name_block.style.backgroundColor=story_json[tue_story][scene].dialogs[dialog].name.color,tue_name_block.style.color=story_json[tue_story][scene].dialogs[dialog].name.color_text,story_json[tue_story][scene].dialogs[dialog].name.className&&(tue_name_block.className=story_json[tue_story][scene].dialogs[dialog].name.className)):tue_name_block.innerHTML=story_json[tue_story][scene].dialogs[dialog].name,tue_name_block.style.visibility="visible"):tue_name_block.style.visibility="hidden",del_element("tue_art"),story_json[tue_story][scene].dialogs[dialog].art)for(t=0;t<story_json[tue_story][scene].dialogs[dialog].art.length;t++){var s=document.createElement("img");story_json[tue_story][scene].dialogs[dialog].art[t].url[languare]?s.src=story_json[tue_story][scene].dialogs[dialog].art[t].url[languare]:story_json[tue_story][scene].dialogs[dialog].art[t].url&&(s.src=story_json[tue_story][scene].dialogs[dialog].art[t].url),s.classList.add("tue_art"),story_json[tue_story][scene].dialogs[dialog].art[t].style&&(s.style=story_json[tue_story][scene].dialogs[dialog].art[t].style),s.style.position="absolute",story_json[tue_story][scene].dialogs[dialog].art[t].fit&&(s.style.objectFit=story_json[tue_story][scene].dialogs[dialog].art[t].fit),story_json[tue_story][scene].dialogs[dialog].art[t].size&&(s.style.width=story_json[tue_story][scene].dialogs[dialog].art[t].size[0],s.style.height=story_json[tue_story][scene].dialogs[dialog].art[t].size[1]),0!=story_json[tue_story][scene].dialogs[dialog].art[t].position[0]&&(s.style.left=story_json[tue_story][scene].dialogs[dialog].art[t].position[0]),0!=story_json[tue_story][scene].dialogs[dialog].art[t].position[1]&&(s.style.right=story_json[tue_story][scene].dialogs[dialog].art[t].position[1]),0!=story_json[tue_story][scene].dialogs[dialog].art[t].position[2]&&(s.style.top=story_json[tue_story][scene].dialogs[dialog].art[t].position[2]),0!=story_json[tue_story][scene].dialogs[dialog].art[t].position[3]&&(s.style.bottom=story_json[tue_story][scene].dialogs[dialog].art[t].position[3]),tuesday.appendChild(s)}if(story_json[tue_story][scene].dialogs[dialog].choice)for(tue_next.style.visibility="hidden",t=0;t<story_json[tue_story][scene].dialogs[dialog].choice.length;t++){var o=document.createElement("div");story_json[tue_story][scene].dialogs[dialog].choice[t].className&&(o.className=story_json[tue_story][scene].dialogs[dialog].choice[t].className),story_json[tue_story][scene].dialogs[dialog].choice[t].style&&(o.style=story_json[tue_story][scene].dialogs[dialog].choice[t].style),o.classList.add("tue_choice"),o.style.position="absolute",o.style.backgroundColor=story_json[tue_story][scene].dialogs[dialog].choice[t].color,o.style.backgroundRepeat="no-repeat",o.style.backgroundPosition="center",story_json[tue_story][scene].dialogs[dialog].choice[t].art&&(o.style.backgroundImage="url('"+(story_json[tue_story][scene].dialogs[dialog].choice[t].art[languare]?story_json[tue_story][scene].dialogs[dialog].choice[t].art[languare]:story_json[tue_story][scene].dialogs[dialog].choice[t].art)+"')"),story_json[tue_story][scene].dialogs[dialog].choice[t].size&&(0!=story_json[tue_story][scene].dialogs[dialog].choice[t].size[0]&&(o.style.width=story_json[tue_story][scene].dialogs[dialog].choice[t].size[0]),0!=story_json[tue_story][scene].dialogs[dialog].choice[t].size[1]&&(o.style.height=story_json[tue_story][scene].dialogs[dialog].choice[t].size[1],o.style.lineHeight=story_json[tue_story][scene].dialogs[dialog].choice[t].size[1])),story_json[tue_story][scene].dialogs[dialog].choice[t].art_size&&(o.style.backgroundSize=story_json[tue_story][scene].dialogs[dialog].choice[t].art_size[0]+" "+story_json[tue_story][scene].dialogs[dialog].choice[t].art_size[1]),0!=story_json[tue_story][scene].dialogs[dialog].choice[t].position[0]&&(o.style.left=story_json[tue_story][scene].dialogs[dialog].choice[t].position[0]),0!=story_json[tue_story][scene].dialogs[dialog].choice[t].position[1]&&(o.style.right=story_json[tue_story][scene].dialogs[dialog].choice[t].position[1]),0!=story_json[tue_story][scene].dialogs[dialog].choice[t].position[2]&&(o.style.top=story_json[tue_story][scene].dialogs[dialog].choice[t].position[2]),0!=story_json[tue_story][scene].dialogs[dialog].choice[t].position[3]&&(o.style.bottom=story_json[tue_story][scene].dialogs[dialog].choice[t].position[3]),o.style.color=story_json[tue_story][scene].dialogs[dialog].choice[t].color_text,o.style.padding=story_json[tue_story][scene].dialogs[dialog].choice[t].indent_text,o.style.fontSize=story_json[tue_story][scene].dialogs[dialog].choice[t].size_text,o.style.textAlign="center",o.style.zIndex=1001+t,story_json[tue_story][scene].dialogs[dialog].choice[t].text&&("object"!=typeof story_json[tue_story][scene].dialogs[dialog].choice[t].text||story_json[tue_story][scene].dialogs[dialog].choice[t].text[languare]&&"object"!=typeof story_json[tue_story][scene].dialogs[dialog].choice[t].text[languare])&&(story_json[tue_story][scene].dialogs[dialog].choice[t].text[languare]?o.innerHTML=story_json[tue_story][scene].dialogs[dialog].choice[t].text[languare]:o.innerHTML=story_json[tue_story][scene].dialogs[dialog].choice[t].text);var a="";if(story_json[tue_story][scene].dialogs[dialog].choice[t].variables)for(var n=0;n<story_json[tue_story][scene].dialogs[dialog].choice[t].variables.length;n++)"add"==story_json[tue_story][scene].dialogs[dialog].choice[t].variables[n][1]?a+="story_json.parameters.variables."+story_json[tue_story][scene].dialogs[dialog].choice[t].variables[n][0]+" += "+story_json[tue_story][scene].dialogs[dialog].choice[t].variables[n][2]+";":"set"==story_json[tue_story][scene].dialogs[dialog].choice[t].variables[n][1]&&(a+="story_json.parameters.variables."+story_json[tue_story][scene].dialogs[dialog].choice[t].variables[n][0]+" = "+story_json[tue_story][scene].dialogs[dialog].choice[t].variables[n][2]+";");if(story_json[tue_story][scene].dialogs[dialog].choice[t].go_to&&"tue_go"!=story_json[tue_story][scene].dialogs[dialog].choice[t].go_to)"tue_load_autosave"==(n=story_json[tue_story][scene].dialogs[dialog].choice[t].go_to)?o.setAttribute("onclick","load_stag('auto');"+r()):"load"==n?o.setAttribute("onclick","load_stag('bookmark');"+r()):o.setAttribute("onclick",a+"go_to('"+n+"');"+r());else o.setAttribute("onclick","del_element('tue_choice'); "+a+"go_story(true);"+r());function r(){var e="";return story_json[tue_story][scene].dialogs[dialog].choice[t].sound&&(e=get_sound(story_json[tue_story][scene].dialogs[dialog].choice[t].sound)),story_json[tue_story][scene].dialogs[dialog].choice[t].sound_stop&&(e+=get_stop_sound(story_json[tue_story][scene].dialogs[dialog].choice[t].sound_stop)),e}tuesday.appendChild(o)}var l,_;story_json[tue_story][scene].dialogs[dialog].html&&(story_json[tue_story][scene].dialogs[dialog].html[languare]?((l=document.createElement("div")).className="tue_html_dialog",l.innerHTML=story_json[tue_story][scene].dialogs[dialog].html[languare],tuesday.appendChild(l)):((l=document.createElement("div")).className="tue_html_dialog",l.innerHTML=story_json[tue_story][scene].dialogs[dialog].html,tuesday.appendChild(l)));if(story_json[tue_story][scene].dialogs[dialog].variables)for(t=0;t<story_json[tue_story][scene].dialogs[dialog].variables.length;t++){var i=story_json[tue_story][scene].dialogs[dialog].variables[t][0];"add"==story_json[tue_story][scene].dialogs[dialog].variables[t][1]?(story_json.parameters.variables[i]=parseFloat(story_json.parameters.variables[i])+parseFloat(story_json[tue_story][scene].dialogs[dialog].variables[t][2]),tuesday.dispatchEvent(new Event(story_json[tue_story][scene].dialogs[dialog].variables[t][0]+"_add"))):"set"==story_json[tue_story][scene].dialogs[dialog].variables[t][1]&&(story_json.parameters.variables[i]=story_json[tue_story][scene].dialogs[dialog].variables[t][2]),tuesday.dispatchEvent(new Event(story_json[tue_story][scene].dialogs[dialog].variables[t][0]+"_set"))}(story_json[tue_story][scene].dialogs[dialog].event&&tuesday.dispatchEvent(new Event(story_json[tue_story][scene].dialogs[dialog].event)),story_json[tue_story][scene].dialogs[dialog].sound_stop)&&sound_stop((_=story_json[tue_story][scene].dialogs[dialog].sound_stop)[languare]?_[languare]:_);story_json[tue_story][scene].dialogs[dialog].sound&&sound_play((_=story_json[tue_story][scene].dialogs[dialog].sound)[languare]?_[languare]:_);tuesday.dispatchEvent(new Event("creation_dialog"))}function values_in_text(e){var t="";e?(dialog_letter=dialog_text.length,t=dialog_text,t+=story_json[tue_story][scene].dialogs[dialog].text_add[languare]?story_json[tue_story][scene].dialogs[dialog].text_add[languare]:story_json[tue_story][scene].dialogs[dialog].text_add):(dialog_letter=0,t=story_json[tue_story][scene].dialogs[dialog].text[languare]?story_json[tue_story][scene].dialogs[dialog].text[languare]:story_json[tue_story][scene].dialogs[dialog].text);let s=t.matchAll(/<(.*?)>/g);s=Array.from(s);for(var o=0;o<s.length;o++){let e=s[o];t=t.replace(e[0],story_json.parameters.variables[e[1]])}dialog_text=t}function go_story(e){if(!story_json[tue_story][scene].dialogs[dialog].choice||e){if(story_json[tue_story][scene].dialogs[dialog].go_to)go_to(story_json[tue_story][scene].dialogs[dialog].go_to);else dialog<story_json[tue_story][scene].dialogs.length-1?(dialog++,story_json[tue_story][scene].dialogs[dialog].text?"skip"==story_json[tue_story][scene].dialogs[dialog].text[languare]?go_story():creation_dialog():story_json[tue_story][scene].dialogs[dialog].text_add&&"skip"==story_json[tue_story][scene].dialogs[dialog].text_add[languare]?go_story():creation_dialog()):++scene>=story_json[tue_story].length?scene=story_json[tue_story].length-1:(dialog=0,creation_scene());story_json.parameters.autosave&&save_stag("auto")}}function back_story(){(del_element("tue_choice"),del_element("tue_html_dialog"),story_json[tue_story][scene].dialogs[dialog].back_to)?go_to(story_json[tue_story][scene].dialogs[dialog].back_to):dialog>0?(dialog-=1,story_json[tue_story][scene].dialogs[dialog].text?"skip"==story_json[tue_story][scene].dialogs[dialog].text[languare]?back_story():creation_dialog():story_json[tue_story][scene].dialogs[dialog].text_add?"skip"==story_json[tue_story][scene].dialogs[dialog].text_add[languare]?back_story():(dialog_text=story_json[tue_story][scene].dialogs[dialog].text_add[languare]?dialog_text.replace(story_json[tue_story][scene].dialogs[dialog].text_add[languare],""):dialog_text.replace(story_json[tue_story][scene].dialogs[dialog].text_add,""),dialog_text=story_json[tue_story][scene].dialogs[dialog+1].text_add[languare]?dialog_text.replace(story_json[tue_story][scene].dialogs[dialog+1].text_add[languare],""):dialog_text.replace(story_json[tue_story][scene].dialogs[dialog+1].text_add,""),creation_dialog()):(creation_dialog(),del_element("tue_choice"),del_element("tue_html_dialog"))):(scene-=1)<0?scene=0:(dialog=story_json[tue_story][scene].dialogs.length-1,creation_scene());story_json.parameters.autosave&&save_stag("auto")}function save_stag(e){localStorage.setItem("tue_"+e+"_scene",scene),localStorage.setItem("tue_"+e+"_dialog",dialog),localStorage.setItem("tue_"+e+"_story",tue_story),story_json.parameters.variables&&localStorage.setItem("tue_"+e+"_data",JSON.stringify(story_json.parameters.variables)),"bookmark"==e&&tuesday.dispatchEvent(new Event("save"))}function load_stag(e){del_element("tue_choice"),del_element("tue_html_sc"),scene=localStorage.getItem("tue_"+e+"_scene"),dialog=localStorage.getItem("tue_"+e+"_dialog"),tue_story=localStorage.getItem("tue_"+e+"_story"),story_json.parameters.variables=JSON.parse(localStorage.getItem("tue_"+e+"_data")),creation_scene(),search_music(),tuesday.dispatchEvent(new Event("load"))}function go_to(e){del_element("tue_choice"),del_element("tue_html_dialog"),dialog=0,scene=0,tue_story=e,creation_scene()}function del_element(e){for(var t=document.getElementById("tuesday").getElementsByClassName(e),s=t.length,o=0;o<s;o++)t[0].parentNode.removeChild(t[0])}function anim_text(){0==dialog_speed?tue_text_view.innerHTML=dialog_text:0!=dialog_speed&&dialog_letter<dialog_text.length?dialog_timeout=setTimeout(add_letter,dialog_speed):dialog_letter==dialog_text.length&&(tue_text_view.innerHTML=dialog_text,tuesday.dispatchEvent(new Event("dialog_end")))}function add_letter(){tue_text_view.innerHTML=dialog_text.slice(0,dialog_letter),dialog_letter++,anim_text()}function search_music(){for(var e=scene;e>=0;e--)if(story_json[tue_story][e].background_music){tue_bg_music.canPlayType("audio/mpeg")?story_json[tue_story][e].background_music.indexOf("blob:")>-1?tue_bg_music.src=story_json[tue_story][e].background_music:story_json[tue_story][e].background_music.indexOf(".mp3")>-1?tue_bg_music.src=story_json[tue_story][e].background_music:tue_bg_music.src=story_json[tue_story][e].background_music+".mp3":tue_bg_music.src=story_json[tue_story][e].background_music+".ogg",tue_bg_music.loop=!0,tue_bg_music.play();break}}function creation_sound(){for(var e=0;Object.keys(story_json.parameters.sounds)[e];){var t=document.createElement("audio");t.preload="auto",t.id=Object.keys(story_json.parameters.sounds)[e],t.canPlayType("audio/mpeg")?story_json.parameters.sounds[Object.keys(story_json.parameters.sounds)[e]].indexOf("blob:")>-1?t.src=story_json.parameters.sounds[Object.keys(story_json.parameters.sounds)[e]]:story_json.parameters.sounds[Object.keys(story_json.parameters.sounds)[e]].indexOf(".mp3")>-1?t.src=story_json.parameters.sounds[Object.keys(story_json.parameters.sounds)[e]]:t.src=story_json.parameters.sounds[Object.keys(story_json.parameters.sounds)[e]]+".mp3":t.src=story_json.parameters.sounds[Object.keys(story_json.parameters.sounds)[e]]+".ogg",tuesday.appendChild(t),e++}}function get_sound(e){return e[languare]?"sound_play('"+e[languare]+"');":"sound_play('"+e+"');"}function get_stop_sound(e){return e[languare]?"sound_stop('"+e[languare]+"');":"sound_stop('"+e+"');"}function sound_play(e){document.getElementById(e).currentTime=0,document.getElementById(e).volume=1,document.getElementById(e).play()}function sound_stop(e){document.getElementById(e).currentTime=0,document.getElementById(e).pause()}function add_style(e){var t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",e),document.getElementsByTagName("head").item(0).appendChild(t)}function full_screen(){tue_fullScreen?(tue_fullScreen=!1,document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()):(tue_fullScreen=!0,tuesday.requestFullscreen?tuesday.requestFullscreen():tuesday.mozRequestFullScreen?tuesday.mozRequestFullScreen():tuesday.webkitRequestFullscreen?tuesday.webkitRequestFullscreen():tuesday.msRequestFullscreen&&tuesday.msRequestFullscreen())}document.oncontextmenu=cmenu,document.addEventListener("keydown",function(e){var t=e.code;if(t==story_json.parameters.key.next)go_story();else if(t==story_json.parameters.key.back)back_story();else if(t==story_json.parameters.key.main){go_to(story_json.parameters.launch_story)}else t==story_json.parameters.key.save?save_stag("bookmark"):t==story_json.parameters.key.load?load_stag("bookmark"):t==story_json.parameters.key.autosave?load_stag("auto"):t==story_json.parameters.key.full_screen&&full_screen()}); </script><script>let story_novel={"parameters":{"text_panel":{"size":["95%","25%"],"color":"#dfc0a5","indent_text":"16px","indent_bottom":"32px","size_text":"20px","style":"border-radius:16px;","dialog_speed":"20","position":["0","0","0",0]},"name_panel":{"size":["0","48px"],"position":["16px","0","-48px","0"],"size_text":"20px","indent_text":0},"title":"My story","launch_story":"start","key":{"next":"","back":"","save":"","load":"","full_screen":"","launch_story":"","load_autosave":""},"languares":["en"],"buttons":[{"name":"tue_back","style":"border-radius:26px;","position":["2.25%",0,0,"4.95%"],"size":["52px","52px"],"color":"","size_text":"44px","text":{"en":"<","ja":"<","ru":"<"},"art":{"en":{},"ja":{},"ru":{}}},{"name":"tue_next","style":"border-radius:26px;","position":[0,"2.33%",0,"4.58%"],"size":["52px","52px"],"color":"","size_text":"44px","text":{"en":">","ja":">","ru":">"},"art":{"en":{},"ja":{},"ru":{}}}],"style_file":"","autosave":false,"variables":{},"sounds":{}},"start":[{"background_image":{"en":"cover_2.jpg","ja":{},"ru":{}},"dialogs":[{"choice":[{"go_to":"tue_go","position":["41.68%",0,"41.94%",0],"size":["123px","66px"],"color":"#c1a285","color_text":"#ffffff","text":{"en":"Start","ja":"button","ru":"button"},"art":{"en":{},"ja":{},"ru":{}},"art_size":["",""],"style":"border-radius:16px;"}]},{"text":{"en":"Hello! how is your mood?","ja":"こんにちは！ 気分はどうですか？","ru":"Здравствуйте! как твое настроение?"},"art":[{"position":["14.17%",0,"2.38%",0],"size":["71.57%","98.17%"],"url":{"en":"mad_woman.png","ja":"","ru":""},"fit":"contain"}]},{"text":{"en":"Will you come with me to the wasteland?","ja":"私と一緒に荒れ地に来てくれませんか。","ru":"Пойдешь со мной в пустоши?"},"art":[{"position":["14.17%",0,"2.38%",0],"size":["71.57%","98.17%"],"url":{"en":"mad_woman.png","ja":"","ru":""},"fit":"contain"}],"name":{"en":"Woman"},"choice":[{"go_to":"wasteland","position":[0,"24%",0,"7%"],"size":["120px","45px"],"color":"#c0a183","text":{"en":"Yes","ja":"button","ru":"button"},"art":{"en":{},"ja":{},"ru":{}},"art_size":["",""],"style":"border-radius:16px;"},{"go_to":"tue_go","position":["24%","0","0","7%"],"size":["120px","45px"],"color":"#c0a183","text":{"en":"No","ja":"button","ru":"button"},"art":{"en":{},"ja":{},"ru":{}},"art_size":["",""],"style":"border-radius:16px;"}]},{"text":{"en":"okay, I'll go alone ...","ja":"さて、私は一人で行きます...","ru":""},"art":[{"position":["14.17%",0,"2.38%",0],"size":["71.57%","98.17%"],"url":{"en":"mad_woman.png","ja":"","ru":""},"fit":"contain"}]}]}],"wasteland":[{"background_image":{"en":"cover_2.jpg","ja":{},"ru":{}},"dialogs":[{"text":{"en":"I'm glad you agreed","ja":"","ru":""},"name":{"en":"woman"},"art":[{"position":["14.17%",0,"2.38%",0],"size":["71.57%","98.17%"],"url":{"en":"mad_woman.png","ja":"","ru":""},"fit":"contain"}]}]}]}; load_story('data',story_novel); </script></body></html>